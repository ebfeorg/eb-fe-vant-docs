"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["133"],{4584:function(e,l,a){a.r(l),a.d(l,{default:()=>h});var t=a("2885"),n=a("4923"),i=a("798"),o=a("7211"),r=a("6537");let u=(0,t.aZ)({__name:"BasicUsage",setup(e){let[l]=(0,i.$)(void 0),a=(0,t.iH)(),u=()=>{var e;null===(e=a.value)||void 0===e||e.validate().then(()=>{var e,l;console.log("getValues",null===(l=a.value)||void 0===l?void 0:null===(e=l.getValues)||void 0===e?void 0:e.call(l))})};return(e,i)=>{let s=(0,t.up)("demo-block");return(0,t.wg)(),(0,t.j4)(s,{title:"基础用法"},{default:(0,t.w5)(()=>[(0,t.Wm)((0,t.SU)(o.l0),{ref_key:"FormRef",ref:a,"validate-trigger":["onBlur","onChange"]},{default:(0,t.w5)(()=>[(0,t._)("section",null,[(0,t._)("p",null,"filedValue("+(0,t.zw)(typeof(0,t.SU)(l))+"): "+(0,t.zw)((0,t.SU)(l)),1),(0,t.Wm)((0,t.SU)(n.BJ),{modelValue:(0,t.SU)(l),"onUpdate:modelValue":i[0]||(i[0]=e=>(0,t.dq)(l)?l.value=e:null),"field-props":{name:"testField",label:"测试字段",required:!0,rules:[{required:!0,message:"请选择"}]}},null,8,["modelValue"])]),(0,t.Wm)((0,t.SU)(r.zx),{round:"",block:"",type:"primary",onClick:u},{default:(0,t.w5)(()=>i[1]||(i[1]=[(0,t.Uk)(" 提交 ")])),_:1,__:[1]})]),_:1},512)]),_:1})}}});var s=a("6521");let d=(0,s.default)(u,[["__scopeId","data-v-a9b30746"]]);class v{constructor(e){this.dic={},this.optionAttrsAlias={labelAlias:"label",valueAlias:"value"},this.optionsCache=[];let l=[],a=[];e.forEach(e=>{let[t,n=t,i=t,o={}]=e;"number"!=typeof t&&"string"!=typeof t||(this.dic[t]=Object.assign(Object.assign({},o),{value:n,label:i})),l.push([t,{value:n,label:i,extraInfo:o}]),a.push([n,t])}),this.mapInfo=new Map(l),this.valueToKeyMap=new Map(a)}valueByKey(e){var l;return null===(l=this.mapInfo.get(e))||void 0===l?void 0:l.value}labelByKey(e){var l;return null===(l=this.mapInfo.get(e))||void 0===l?void 0:l.label}extraInfoByKey(e){var l;return null===(l=this.mapInfo.get(e))||void 0===l?void 0:l.extraInfo}infoByKey(e){return this.mapInfo.get(e)}labelByValue(e){var l;return null===(l=this.infoByValue(e))||void 0===l?void 0:l.label}keyByValue(e){return this.valueToKeyMap.get(e)}extraInfoByValue(e){var l;return null===(l=this.infoByValue(e))||void 0===l?void 0:l.extraInfo}infoByValue(e){let l=this.valueToKeyMap.get(e);return l?this.mapInfo.get(l):void 0}genOptions(e){let{labelAlias:l,valueAlias:a}=Object.assign(Object.assign({},this.optionAttrsAlias),null!=e?e:{});return l===this.optionAttrsAlias.labelAlias&&a===this.optionAttrsAlias.valueAlias&&this.optionsCache.length||(this.optionsCache=Array.from(this.mapInfo.values()).map(e=>Object.assign({[l]:e.label,[a]:e.value},e.extraInfo)),this.optionAttrsAlias={labelAlias:l,valueAlias:a}),this.optionsCache}getDic(){return this.dic}get keys(){return Array.from(this.mapInfo.keys())}get values(){return Array.from(this.mapInfo.values()).map(e=>e.value)}get labels(){return Array.from(this.mapInfo.values()).map(e=>e.label)}}let p=(0,t.aZ)({__name:"Options",setup(e){let l=function(e){let l=new v(e);return Object.assign(Object.assign({},l.getDic()),{valueByKey:l.valueByKey.bind(l),labelByKey:l.labelByKey.bind(l),extraInfoByKey:l.extraInfoByKey.bind(l),infoByKey:l.infoByKey.bind(l),labelByValue:l.labelByValue.bind(l),keyByValue:l.keyByValue.bind(l),extraInfoByValue:l.extraInfoByValue.bind(l),infoByValue:l.infoByValue.bind(l),genOptions:l.genOptions.bind(l),keys:l.keys,values:l.values,labels:l.labels,_key_type:l._key_type,_possible_v_type:l._possible_v_type,_strict_v_type:l._strict_v_type,_extra_info_type:l._extra_info_type})}([["非长期"],["长期"]]),[a]=(0,i.$)(void 0),u=(0,t.iH)(),s=()=>{var e;null===(e=u.value)||void 0===e||e.validate().then(()=>{var e,l;console.log("getValues",null===(l=u.value)||void 0===l?void 0:null===(e=l.getValues)||void 0===e?void 0:e.call(l))})};return(e,i)=>{let d=(0,t.up)("demo-block");return(0,t.wg)(),(0,t.j4)(d,{title:"自定义 Options"},{default:(0,t.w5)(()=>[(0,t.Wm)((0,t.SU)(o.l0),{ref_key:"FormRef",ref:u,"validate-trigger":["onBlur","onChange"]},{default:(0,t.w5)(()=>[(0,t._)("section",null,[(0,t._)("p",null,"filedValue: "+(0,t.zw)((0,t.SU)(a)),1),(0,t.Wm)((0,t.SU)(n.BJ),{modelValue:(0,t.SU)(a),"onUpdate:modelValue":i[0]||(i[0]=e=>(0,t.dq)(a)?a.value=e:null),options:(0,t.SU)(l).genOptions(),"field-props":{name:"validityPeriodField",label:"证件有效期",required:!0,rules:[{required:!0,message:"请选择"}]}},null,8,["modelValue","options"])]),(0,t.Wm)((0,t.SU)(r.zx),{round:"",block:"",type:"primary",onClick:s},{default:(0,t.w5)(()=>i[1]||(i[1]=[(0,t.Uk)(" 提交 ")])),_:1,__:[1]})]),_:1},512)]),_:1})}}}),f=(0,s.default)(p,[["__scopeId","data-v-d6bd7c10"]]);var m=a("1384");let y=(0,t.aZ)({__name:"Change",setup(e){let[l,a]=(0,i.$)(void 0),u=(0,t.iH)(),s=()=>{var e;null===(e=u.value)||void 0===e||e.validate().then(()=>{var e,l;console.log("getValues",null===(l=u.value)||void 0===l?void 0:null===(e=l.getValues)||void 0===e?void 0:e.call(l))})};return(e,i)=>{let d=(0,t.up)("demo-block");return(0,t.wg)(),(0,t.j4)(d,{title:"暴露 change 事件"},{default:(0,t.w5)(()=>[(0,t.Wm)((0,t.SU)(o.l0),{ref_key:"FormRef",ref:u,"validate-trigger":["onBlur","onChange"]},{default:(0,t.w5)(()=>[(0,t._)("section",null,[(0,t._)("p",null,"filedValue("+(0,t.zw)(typeof(0,t.SU)(l))+"): "+(0,t.zw)((0,t.SU)(l)),1),(0,t.Wm)((0,t.SU)(n.BJ),{modelValue:(0,t.SU)(l),"onUpdate:modelValue":i[0]||(i[0]=e=>(0,t.dq)(l)?l.value=e:null),"field-props":{name:"testField",label:"测试字段",required:!0,rules:[{required:!0,message:"请选择"}]},onChange:i[1]||(i[1]=e=>{(0,t.SU)(m.CF)(JSON.stringify(e)),(0,t.SU)(a)(e.value)})},null,8,["modelValue"])]),(0,t.Wm)((0,t.SU)(r.zx),{round:"",block:"",type:"primary",onClick:s},{default:(0,t.w5)(()=>i[2]||(i[2]=[(0,t.Uk)(" 提交 ")])),_:1,__:[2]})]),_:1},512)]),_:1})}}}),g=(0,s.default)(y,[["__scopeId","data-v-69153c12"]]),c=(0,t.aZ)({__name:"index",setup:e=>(e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(d),(0,t.Wm)(g),(0,t.Wm)(f)],64))}),h=(0,s.default)(c,[["__scopeId","data-v-16268870"]])},7211:function(e,l,a){a.d(l,{l0:()=>y});var t=a("5284"),n=a("2885"),i=a("8134"),o=a("792"),r=a("5507"),u=a("8429"),s=a("4561"),d=a("3538");let[v,p]=(0,i.do)("form"),f={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:o.Or,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:o.J5,showErrorMessage:o.J5,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var m=(0,n.aZ)({name:v,props:f,emits:["submit","failed"],setup(e,{emit:l,slots:a}){let{children:t,linkChildren:i}=(0,s.$E)(r.WN),o=e=>e?t.filter(l=>e.includes(l.name)):t,v=e=>new Promise((l,a)=>{let t=[];o(e).reduce((e,l)=>e.then(()=>{if(!t.length)return l.validate().then(e=>{e&&t.push(e)})}),Promise.resolve()).then(()=>{t.length?a(t):l()})}),f=e=>new Promise((l,a)=>{Promise.all(o(e).map(e=>e.validate())).then(e=>{(e=e.filter(Boolean)).length?a(e):l()})}),m=e=>{let l=t.find(l=>l.name===e);return l?new Promise((e,a)=>{l.validate().then(l=>{l?a(l):e()})}):Promise.reject()},y=l=>"string"==typeof l?m(l):e.validateFirst?v(l):f(l),g=(e,l)=>{t.some(a=>a.name===e&&(a.$el.scrollIntoView(l),!0))},c=()=>t.reduce((e,l)=>(void 0!==l.name&&(e[l.name]=l.formValue.value),e),{}),h=()=>{let a=c();y().then(()=>l("submit",a)).catch(t=>{l("failed",{values:a,errors:t});let{scrollToError:n,scrollToErrorPosition:i}=e;n&&t[0].name&&g(t[0].name,i?{block:i}:void 0)})},_=e=>{(0,u.PF)(e),h()};return i({props:e}),(0,d.F)({submit:h,validate:y,getValues:c,scrollToField:g,resetValidation:e=>{"string"==typeof e&&(e=[e]),o(e).forEach(e=>{e.resetValidation()})},getValidationStatus:()=>t.reduce((e,l)=>(e[l.name]=l.getValidationStatus(),e),{})}),()=>{var e;return(0,n.Wm)("form",{class:p(),onSubmit:_},[null==(e=a.default)?void 0:e.call(a)])}}});let y=(0,t.n)(m)}}]);