"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["842"],{8046:function(e,a,t){t.r(a),t.d(a,{default:()=>S});var l=t("2885"),n=t("798"),r=t("4923"),u=t("6537");let i={class:"trigger-box"},o=(0,l.aZ)({__name:"BasicUsage",setup(e){let a=[{name:"选项1",value:"1"},{name:"选项2",value:"2"}],t={text:"name",value:"value"},[o,v]=(0,n.$)(void 0);return(e,n)=>((0,l.wg)(),(0,l.j4)((0,l.SU)(r.$y),{modelValue:(0,l.SU)(o),"onUpdate:modelValue":n[0]||(n[0]=e=>(0,l.dq)(o)?o.value=e:null),"picker-props":{title:"基础用法",columns:a,columnsFieldNames:t}},{trigger:(0,l.w5)(e=>{let{triggerPopupShow:a,showValue:t}=e;return[(0,l._)("div",i,[(0,l.Wm)((0,l.SU)(u.zx),{type:"primary",onClick:a},{default:(0,l.w5)(()=>n[1]||(n[1]=[(0,l.Uk)(" 点击打开选择器\uD83E\uDD2A ")])),_:2,__:[1]},1032,["onClick"]),(0,l._)("p",null,"show value: "+(0,l.zw)(t),1),(0,l._)("p",null,"modelValue: "+(0,l.zw)((0,l.SU)(o)),1)])]}),_:1},8,["modelValue","picker-props"]))}});var v=t("6521");let c=(0,v.default)(o,[["__scopeId","data-v-5408c816"]]);var d=t("391");let s={class:"trigger-box"},m=(0,l.aZ)({__name:"SearchModeUsage",setup(e){let a=[{name:"选项1",value:"1"},{name:"选项2",value:"2"}],[t,i]=(0,n.$)(a),o={text:"name",value:"value"},[v,c]=(0,n.$)(void 0),m=e=>{(0,d.Xb)(e)?i(a):i(a.filter(a=>a.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())))};return(e,a)=>((0,l.wg)(),(0,l.j4)((0,l.SU)(r.$y),{modelValue:(0,l.SU)(v),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,l.dq)(v)?v.value=e:null),"picker-props":{columns:(0,l.SU)(t),columnsFieldNames:o},"show-search":"",onSearch:m},{trigger:(0,l.w5)(e=>{let{triggerPopupShow:t,showValue:n}=e;return[(0,l._)("div",s,[(0,l.Wm)((0,l.SU)(u.zx),{type:"primary",onClick:t},{default:(0,l.w5)(()=>a[1]||(a[1]=[(0,l.Uk)(" 带搜索框\uD83D\uDD0D ")])),_:2,__:[1]},1032,["onClick"]),(0,l._)("p",null,"show value: "+(0,l.zw)(n),1),(0,l._)("p",null,"modelValue: "+(0,l.zw)((0,l.SU)(v)),1)])]}),title:(0,l.w5)(()=>a[2]||(a[2]=[(0,l.Uk)("Ashun")])),_:1},8,["modelValue","picker-props"]))}}),f=(0,v.default)(m,[["__scopeId","data-v-706e8ab8"]]);var p=t("425");let w={class:"trigger-box"},h=(0,l.aZ)({__name:"DisableOptionUsage",setup(e){let a=[{name:"选项1",value:"1"},{name:"选项2(禁用)",value:"2",disabled:!0},{name:"选项3",value:"3"}],t=[{name:"选项1(禁用)",value:"1(禁用)",disabled:!0},{name:"选项2(禁用)",value:"2(禁用)",disabled:!0},{name:"选项3(禁用)",value:"3(禁用)",disabled:!0}],[i,o]=(0,n.$)(a),v={text:"name",value:"value"},[c,d]=(0,n.$)(void 0),[s,m]=(0,n.$)(""),f=e=>{m("部分选项禁用"),o(a),e()},h=e=>{m("全部选项禁用"),o(t),e()};return(e,a)=>((0,l.wg)(),(0,l.j4)((0,l.SU)(r.$y),{modelValue:(0,l.SU)(c),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,l.dq)(c)?c.value=e:null),"picker-props":{title:(0,l.SU)(s),columns:(0,l.SU)(i),columnsFieldNames:v},onConfirmDisabledOption:a[1]||(a[1]=e=>{let{}=e;return(0,l.SU)(p.CF)("你可以自定义后续操作,回调函数参数类型 TSPConfirmDisabledOptionPayload")})},{trigger:(0,l.w5)(e=>{let{triggerPopupShow:t,showValue:n}=e;return[(0,l._)("div",w,[(0,l._)("span",null,[(0,l.Wm)((0,l.SU)(u.zx),{onClick:e=>f(t)},{default:(0,l.w5)(()=>a[2]||(a[2]=[(0,l.Uk)(" 部分选项禁用 ")])),_:2,__:[2]},1032,["onClick"]),(0,l.Wm)((0,l.SU)(u.zx),{onClick:e=>h(t)},{default:(0,l.w5)(()=>a[3]||(a[3]=[(0,l.Uk)(" 全部选项禁用 ")])),_:2,__:[3]},1032,["onClick"])]),(0,l._)("p",null,"show value: "+(0,l.zw)(n),1),(0,l._)("p",null,"modelValue: "+(0,l.zw)((0,l.SU)(c)),1)])]}),_:1},8,["modelValue","picker-props"]))}}),g=(0,v.default)(h,[["__scopeId","data-v-4d4f97f4"]]),_=(0,l.aZ)({__name:"index",setup:e=>(e,a)=>{let t=(0,l.up)("demo-block");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(t,{title:"基础用法"},{default:(0,l.w5)(()=>[(0,l.Wm)(c)]),_:1}),(0,l.Wm)(t,{title:"开启搜索功能"},{default:(0,l.w5)(()=>[(0,l.Wm)(f)]),_:1}),(0,l.Wm)(t,{title:"禁用选项逻辑增强"},{default:(0,l.w5)(()=>[(0,l.Wm)(g)]),_:1})],64)}}),S=(0,v.default)(_,[["__scopeId","data-v-f227764c"]])},798:function(e,a,t){let l,n,r,u,i,o,v,c,d;t.d(a,{$:function(){return f}});var s,m=t(2885);function f(e){let a=(0,m.iH)(e);return[a,e=>{a.value=e}]}Symbol("GLOBAL_OPTIONS_PROVIDE_KEY");let p=e=>Array.isArray(e),w=e=>null!==e&&"object"==typeof e,h=e=>e instanceof Function,g=e=>null==e,_=typeof window>"u",S=()=>{var e;return!!(_||g(null===(e=window.document)||void 0===e?void 0:e.visibilityState))||"visible"===window.document.visibilityState},y=()=>{var e,a;return null===(e=!_&&(null===(a=window.navigator)||void 0===a?void 0:a.onLine))||void 0===e||e},E=e=>(0,m.dq)(e)?e.value:e,T=new Map,x=e=>g(e)?void 0:T.get(e),C=(e,a,t)=>{let l=T.get(e);null!=l&&l.timer&&clearTimeout(l.timer);let n=setTimeout(()=>T.delete(e),a);T.set(e,{...t,timer:n})};function U(e,a,t){let l,n,r,u,i,o,v=0,c=!1,d=!1,s=!0,m=!a&&0!==a&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw TypeError("Expected a function");function f(a){let t=l,r=n;return l=n=void 0,v=a,u=e.apply(r,t)}function p(e,a){return m?(window.cancelAnimationFrame(i),window.requestAnimationFrame(e)):setTimeout(e,a)}a=+a||0,w(t)&&(c=!!t.leading,r=(d="maxWait"in t)?Math.max(+t.maxWait||0,a):r,s="trailing"in t?!!t.trailing:s);function h(e){let t=e-o,l=e-v;return void 0===o||t>=a||t<0||d&&l>=r}function g(){let e=Date.now();if(h(e))return _(e);i=p(g,function(e){let t=e-o,l=e-v,n=a-t;return d?Math.min(n,r-l):n}(e))}function _(e){return i=void 0,s&&l?f(e):(l=n=void 0,u)}function S(){let e=Date.now(),t=h(e);for(var r,s=arguments.length,m=Array(s),w=0;w<s;w++)m[w]=arguments[w];if(l=m,n=this,o=e,t){if(void 0===i){;return v=r=o,i=p(g,a),c?f(r):u}if(d)return i=p(g,a),f(o)}return void 0===i&&(i=p(g,a)),u}return S.cancel=function(){void 0!==i&&function(e){if(m)return window.cancelAnimationFrame(e);clearTimeout(e)}(i),v=0,l=o=n=i=void 0},S.flush=function(){return void 0===i?u:_(Date.now())},S.pending=function(){return void 0!==i},S}l=(e,a)=>{let{debounceInterval:t,debounceOptions:l,manual:n}=a,r=(0,m.iH)(!1),u=(0,m.iH)(),i=(0,m.Fl)(()=>l),o=(0,m.Fl)(()=>E(t)),v=(0,m.iH)(e.context.runAsync);return n||(r.value=!0),(0,m.m0)(a=>{g(o.value)||(u.value=U(e=>e(),o.value,i.value),e.context.runAsync=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return new Promise((e,t)=>{r.value?(r.value=!1,v.value(...a).then(e).catch(t)):u.value(()=>{v.value(...a).then(e).catch(t)})})},a(()=>{var a;null===(a=u.value)||void 0===a||a.cancel(),e.context.runAsync=v.value}))}),{onCancel(){var e;null===(e=u.value)||void 0===e||e.cancel()}}},n=(e,a)=>{let{errorRetryCount:t=0,errorRetryInterval:l=0}=a,n=(0,m.iH)(),r=(0,m.iH)(0),u=(0,m.Fl)(()=>E(t)),i=(0,m.Fl)(()=>E(l)),o=!1,v=()=>{r.value=0},c=(0,m.Fl)(()=>i.value?i.value:1e3*Math.floor(Math.random()*2**Math.min(r.value,9)+1)),d=()=>{let a;let t=-1===u.value,l=r.value<u.value;return(t||l)&&(t||(r.value+=1),a=setTimeout(()=>{o=!0,e.context.refresh()},c.value)),()=>a&&clearTimeout(a)},s=()=>{n.value&&n.value()};return{onBefore(){o||v(),o=!1,s()},onSuccess(){v()},onError(){n.value=d()},onCancel(){v(),s()}}},r=(e,a)=>{let{ready:t=(0,m.iH)(!0),manual:l,defaultParams:n=[]}=a;return(0,m.YP)(t,a=>{!l&&a&&e.context.run(...n)},{flush:"sync"}),{onBefore(){if(!(h(t)?t():t.value))return e.loading.value=!1,{isBreak:!0}}}},u=(e,a)=>{let{refreshDeps:t,refreshDepsAction:l,manual:n}=a;if(void 0===t||p(t)&&0===t.length)return{};let r=p(t)?t:[t];return(0,m.YP)(r,()=>{l?l():n||e.context.refresh()}),{}},i=(e,a)=>{let{throttleInterval:t,throttleOptions:l}=a,n=(0,m.iH)(),r=(0,m.Fl)(()=>E(t)),u=(0,m.Fl)(()=>l),i=(0,m.iH)(e.context.runAsync);return(0,m.m0)(a=>{if(g(t))return{};n.value=function(e,a,t){let l=!0,n=!0;if("function"!=typeof e)throw TypeError("Expected a function");return w(t)&&(l="leading"in t?!!t.leading:l,n="trailing"in t?!!t.trailing:n),U(e,a,{leading:l,trailing:n,maxWait:a})}(e=>e(),r.value,u.value),e.context.runAsync=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return new Promise((e,t)=>{n.value(()=>{i.value(...a).then(e).catch(t)})})},a(()=>{var a;null===(a=n.value)||void 0===a||a.cancel(),e.context.runAsync=i.value})}),{onCancel(){var e;null===(e=n.value)||void 0===e||e.cancel()}}};let k=new Map,b=(e,a)=>{k.set(e,a),a.then(a=>(k.delete(e),a)).catch(()=>{k.delete(e)})},F=e=>k.get(e),I=new Map,L=(e,a)=>{I.has(e)&&I.get(e).forEach(e=>e(a))},A=(e,a)=>(I.has(e)?I.get(e).push(a):I.set(e,[a]),()=>{let t=I.get(e).indexOf(a);I.get(e).splice(t,1)});o=(e,a)=>{let t,{cacheKey:l,cacheTime:n=6e5,staleTime:r=0,getCache:u,setCache:i}=a;if(!l)return{};let o=h(l)?l:()=>l,v=(0,m.iH)(()=>{}),c=e=>u?u(e):x(e),d=(e,a,t)=>{i?i(e,t):C(e,a,t),L(e,t.data)},s=e=>-1===r||e+r>new Date().getTime(),f=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),p=a=>A(o(a),a=>{e.data.value=a}),w=o(),g=c(w);return g&&f(g,"data")&&(e.data.value=g.data,e.params.value=g.params),w&&(v.value=p()),(0,m.SK)(()=>{v.value()}),{onBefore(a){let t=c(o(a));return t&&f(t,"data")?s(t.time)?(e.data.value=t.data,e.loading.value=!1,{isBreak:!0,breakResult:t.data}):void(e.data.value=t.data):{}},onQuery(a){let l=o(e.params.value),n=F(l);return n&&n!==t||(t=n=a(),b(l,n)),()=>n},onSuccess(e,a){let t=o(a);t&&(v.value(),d(t,n,{data:e,params:a,time:new Date().getTime()}),v.value=p(a))},onMutate(a){let t=o(e.params.value);t&&(v.value(),d(t,n,{data:a,params:e.params.value,time:new Date().getTime()}),v.value=p(e.params.value))}}};function O(){return new Date().getTime()}v=(e,a)=>{let{loadingDelay:t=0,loadingKeep:l=0}=a,n=(0,m.iH)(()=>{}),r=(0,m.Fl)(()=>E(t)),u=(0,m.Fl)(()=>E(l)),i=0,o={},v=()=>{let a;return r.value&&(a=setTimeout(()=>{"pending"===e.status.value&&(e.loading.value=!0)},r.value)),()=>a&&clearTimeout(a)};return{onBefore(){e.loading.value=!r.value,n.value(),n.value=v(),i=O()},onQuery(e){var a;let t,l;if(!u.value)return()=>e();a=u.value+r.value,o=new class e extends Promise{constructor(e){super(e),this.cancel=()=>{l(),clearTimeout(t)}}}(e=>{t=setTimeout(l=e,a)});let n=Promise.allSettled([(async()=>{try{let a=await e();return O()-i<=r.value&&o.cancel(),Promise.resolve(a)}catch(e){return O()-i<=r.value&&o.cancel(),Promise.reject(e)}})(),o]).then(e=>{let a=e[0];return"fulfilled"===a.status?a.value:Promise.reject(a.reason)});return()=>n},onCancel(){n.value()},onAfter(){n.value()}}};let P=new Set,V=new Set,W=new Set,D=(e,a)=>{let t;switch(e){case"FOCUS_LISTENER":t=P;break;case"RECONNECT_LISTENER":t=W;break;case"VISIBLE_LISTENER":t=V}if(!t.has(a))return t.add(a),()=>{t.delete(a)}},H=e=>{e.forEach(e=>{e()})};!_&&null!==(s=window)&&void 0!==s&&s.addEventListener&&(window.addEventListener("visibilitychange",()=>{S()&&H(V)},!1),window.addEventListener("focus",()=>H(P),!1),window.addEventListener("online",()=>H(W),!1));c=(e,a)=>{let{pollingInterval:t,pollingWhenHidden:l=!1,pollingWhenOffline:n=!1,errorRetryCount:r=0}=a,u=(0,m.iH)(),i=(0,m.iH)(!1),o=(0,m.Fl)(()=>E(t)),v=(0,m.Fl)(()=>E(r)),c=[],d=e=>{e&&c.push(e)},s=()=>(l||S())&&(n||y()),f=a=>{let t;if(!e.error.value||0===v.value){if(!g(o.value)&&o.value>=0){if(s())t=setTimeout(a,o.value);else{i.value=!0;return}}return()=>t&&clearTimeout(t)}},p=()=>{i.value&&s()&&(e.context.refresh(),i.value=!1)};return(0,m.YP)(o,()=>{u.value&&(u.value(),u.value=f(()=>e.context.refresh()))}),l||d(D("VISIBLE_LISTENER",p)),n||d(D("RECONNECT_LISTENER",p)),(0,m.SK)(()=>{c.forEach(e=>e())}),{onBefore(){var e;null===(e=u.value)||void 0===e||e.call(u)},onCancel(){var e;null===(e=u.value)||void 0===e||e.call(u)},onAfter(){u.value=f(()=>e.context.refresh())}}};let N=(e,a)=>{let t=!1;return function(){t||(t=!0,e(...arguments),setTimeout(()=>{t=!1},a))}};d=(e,a)=>{let{refreshOnWindowFocus:t=!1,refocusTimespan:l=5e3}=a,n=(0,m.Fl)(()=>E(t)),r=(0,m.Fl)(()=>E(l)),u=[],i=e=>{e&&u.push(e)},o=()=>{u.forEach(e=>e())};return(0,m.m0)(()=>{if(o(),n.value){let a=N(e.context.refresh,r.value);i(D("VISIBLE_LISTENER",a)),i(D("FOCUS_LISTENER",a))}}),(0,m.SK)(()=>{o()}),{}}}}]);